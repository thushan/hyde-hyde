{{- if .IsHome -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": "{{ .Site.Title }}",
  "alternateName": "{{ .Site.Params.title }}",
  "url": "{{ .Site.BaseURL }}",
  "description": "{{ .Site.Params.meta.description }}",
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}about/",
    "sameAs": [
      {{ with .Site.Params.social.twitter }}"https://twitter.com/{{ . }}",{{ end }}
      {{ with .Site.Params.social.github }}"https://github.com/{{ . }}",{{ end }}
      {{ with .Site.Params.social.linkedin }}"https://www.linkedin.com/in/{{ . }}",{{ end }}
      {{ with .Site.Params.social.stackoverflow }}"https://stackoverflow.com/users/{{ . }}",{{ end }}
      {{ with .Site.Params.social.keybase }}"https://keybase.io/{{ . }}"{{ end }}
    ]
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ .Site.BaseURL }}search/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "{{ .Site.Params.author }}",
  "url": "{{ .Site.BaseURL }}about/",
  "image": "{{ .Site.Params.authorimage | absURL }}",
  "jobTitle": "Senior Consultant",
  "worksFor": {
    "@type": "Organization",
    "name": "SixPivot"
  },
  "sameAs": [
    {{ with .Site.Params.social.twitter }}"https://twitter.com/{{ . }}",{{ end }}
    {{ with .Site.Params.social.github }}"https://github.com/{{ . }}",{{ end }}
    {{ with .Site.Params.social.linkedin }}"https://www.linkedin.com/in/{{ . }}",{{ end }}
    {{ with .Site.Params.social.stackoverflow }}"https://stackoverflow.com/users/{{ . }}",{{ end }}
    {{ with .Site.Params.social.keybase }}"https://keybase.io/{{ . }}"{{ end }}
  ]
}
</script>
{{- else if .IsPage -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Article",
  "headline": {{ .Title | jsonify }},
  "image": {{ if .Params.images }}{{ index .Params.images 0 | absURL | jsonify }}{{ else }}{{ index .Site.Params.images 0 | absURL | jsonify }}{{ end }},
  "datePublished": {{ .Date.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
  "dateModified": {{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" | jsonify }},
  "author": {
    "@type": "Person",
    "name": "{{ .Site.Params.author }}",
    "url": "{{ .Site.BaseURL }}about/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "{{ .Site.Title }}",
    "logo": {
      "@type": "ImageObject",
      "url": "{{ "/favicon-32x32.png" | absURL }}"
    }
  },
  "description": {{ with .Description }}{{ . | jsonify }}{{ else }}{{ .Summary | truncate 160 | jsonify }}{{ end }},
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ .Permalink }}"
  },
  "wordCount": {{ .WordCount }},
  "keywords": {{ if .Params.tags }}{{ delimit .Params.tags ", " | jsonify }}{{ else }}""{{ end }}
}
</script>
{{- end -}}

{{- if and (not .IsHome) (not .Params.hideBreadcrumb) -}}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ .Site.BaseURL }}"
    }
    {{- if .Parent -}}
    {{- if not .Parent.IsHome -}}
    ,{
      "@type": "ListItem",
      "position": 2,
      "name": {{ .Parent.Title | jsonify }},
      "item": "{{ .Parent.Permalink }}"
    }
    {{- end -}}
    {{- end -}}
    {{- if not .IsHome -}}
    ,{
      "@type": "ListItem",
      "position": {{ if .Parent }}{{ if .Parent.IsHome }}2{{ else }}3{{ end }}{{ else }}2{{ end }},
      "name": {{ .Title | jsonify }},
      "item": "{{ .Permalink }}"
    }
    {{- end -}}
  ]
}
</script>
{{- end -}}