{{ $include_toc := .Params.include_toc}}
{{ $intro := .Params.intro }}
{{ $toc := .Params.toc }}
<article class="h-entry">
  <header>
    <h1 class="p-name">{{ .Title }}</h1>
    {{ with .Params.subtitle }}
    <span class="post__subtitle">
      {{.}}
    </span>
    {{ end }}
    {{ partial "page-single/post-meta.html" . }}
  </header>
  {{ $tableOfContents := .TableOfContents }}
  {{ with .Site.Params.toc }}
  {{ if and (ne $include_toc false) ( $toc )  }}  
    <div class="intro e-content">
      <p>{{ $intro }}</p>
    </div>
    <div class="toc-wrapper">
      <input type="checkbox" id="tocToggle">
      <label for="tocToggle">Contents</label>
      {{ if eq . "hugo" }}
          {{ $tableOfContents }}
      {{ else if eq . "tocbot"}}
        <div class="toc" id="TableOfContents"></div>
      {{ end }}
    </div>
  {{ else }}
    <div class="intro e-content">
      <p>{{ $intro }}</p>
    </div>
  {{ end }}  
  {{ end }}
  <div class="post e-content">
    {{ .Content }}
  </div>
  {{ partial "page-single/post-navigation.html" . }}
  {{ partial "page-single/post-related.html" . }}
  {{ partial "page-single/post-comment.html" . }}
</article>
